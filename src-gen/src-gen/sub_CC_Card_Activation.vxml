<?xml version="1.0" encoding="utf-8"?>
<vxml version="2.1" xml:lang="en-US"
		xmlns="http://www.w3.org/2001/vxml"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:gvp="http://www.genesyslab.com/2006/vxml21-extension" application="../src/ComposerRoot.vxml">

	
	<!-- VXML code generated by Composer 8.1.450.20 -->
	<!-- Diagram created by Composer: Composer 8.1.450.20 -->
	<!-- Project version: 8.1.450.20 -->
	<!-- Diagram version: 1.0 CreatedOn:  -->
	<!-- Application Author:  -->
	<!-- Release Mode: false -->

	<!-- Global Scripts includes -->
	<script src="../include/common.js" />
	<script src="../include/ctic.js" />
	<script src="../include/json.js" />
	<script src="../include/DataAccess.js" />

	<!-- Global Vars declarations -->
	<script>
		var AppState = new Object();
		AppState.System = new Object();
		AppState.System.RetainInputTypeVariableDefaultValue = false;
		AppState.CallUUID = session.connection.uuid;
		AppState.ANI = getANI();
		AppState.DNIS = getDNIS();
		AppState.USE_LCASE_USERDATAKEY = initSystemTypeVariable('USE_LCASE_USERDATAKEY',0);
  		
  		if (session.connection.protocol.sip.headers != undefined &amp;&amp;
			    session.connection.protocol.sip.headers['x-genesys-gvp-session-id']){
			AppState.GVPSessionID = session.connection.protocol.sip.headers['x-genesys-gvp-session-id'];
		} else {
			AppState.GVPSessionID = 'undefined';
		}
  			
		
		AppState.APP_ASR_LANGUAGE = initSystemTypeVariable('APP_ASR_LANGUAGE','en-US');
		AppState.APP_LANGUAGE = initSystemTypeVariable('APP_LANGUAGE','en-US');
		AppState.COMPOSER_WSSTUBBING = initSystemTypeVariable('COMPOSER_WSSTUBBING','0');
		AppState.EnableFCR = initSystemTypeVariable('EnableFCR',true);
		AppState.EnableReports = initSystemTypeVariable('EnableReports',false);
		AppState.EnableSNMP = initSystemTypeVariable('EnableSNMP',false);
		AppState.GRAMMARFILEDIR = initSystemTypeVariable('GRAMMARFILEDIR','../Resources/Grammars');
		AppState.IVR_AccStatus = '';
		AppState.IVR_EnrollStatus = '';
		AppState.IVR_Skill = '';
		AppState.LAST_EVENT_ELEMENT = initSystemTypeVariable('LAST_EVENT_ELEMENT','undefined');
		AppState.LAST_EVENT_LINE = initSystemTypeVariable('LAST_EVENT_LINE','undefined');
		AppState.LAST_EVENT_MSG = initSystemTypeVariable('LAST_EVENT_MSG','undefined');
		AppState.LAST_EVENT_NAME = initSystemTypeVariable('LAST_EVENT_NAME','undefined');
		AppState.LAST_EVENT_URL = initSystemTypeVariable('LAST_EVENT_URL','undefined');
		AppState.MYDATE = '';
		AppState.OCS_Record = initSystemTypeVariable('OCS_Record',getCallflowOCSRecord());
		AppState.OCS_RecordURI = initSystemTypeVariable('OCS_RecordURI',getCallflowRecordURI());
		AppState.OCS_URI = initSystemTypeVariable('OCS_URI',getCallflowOCSURI());
		AppState.PREV_APP_ASR_LANGUAGE = initSystemTypeVariable('PREV_APP_ASR_LANGUAGE','undefined');
		AppState.PREV_APP_LANGUAGE = initSystemTypeVariable('PREV_APP_LANGUAGE','undefined');
		AppState.SCRIPTSDIR = initSystemTypeVariable('SCRIPTSDIR','../Scripts');
		AppState.v_Reasons = '';
		AppState.VA_DETAILS = '';
		AppState.vAccountNo_Out = '';
		AppState.vAccStatus = '';
		AppState.vActCode = '';
		AppState.vActiveCardNum = '';
		AppState.var0 = undefined;
		AppState.var1 = undefined;
		AppState.var2 = undefined;
		AppState.vATMPIN = '';
		AppState.vATMPinResult = '';
		AppState.vAuthFlag = '';
		AppState.vBINOpt = '';
		AppState.vBkndDownCounter = '';
		AppState.vBlockCode = '';
		AppState.vBlockFlag = '';
		AppState.vCallEndReason = '';
		AppState.vCaptureDT = '';
		AppState.vCardBillAddr = '';
		AppState.vCardExpDate = '';
		AppState.vCardFlag = '';
		AppState.vCardIssueDate = '';
		AppState.vCardNo = '';
		AppState.vCardNumCounter = '';
		AppState.vCardPanCode = '';
		AppState.vCardStatus = '';
		AppState.vCCAuthAction = '';
		AppState.vCCConfAuth = '';
		AppState.vCount = '';
		AppState.vCounter = 0;
		AppState.vCreditCardCRNInput = '';
		AppState.vCRNNum = '';
		AppState.vCustName = '';
		AppState.vCustomerID = '';
		AppState.vCustSeg = '';
		AppState.vCustType = '';
		AppState.vCVV2 = '';
		AppState.vCYARA_ANI = '';
		AppState.vDate = '';
		AppState.vDebitCard = '';
		AppState.vDisplayName = '';
		AppState.vDOB = '';
		AppState.vEndTime = '';
		AppState.vEnrollStatus = '';
		AppState.vErrMsg = '';
		AppState.vFlagAA = 'N';
		AppState.vFlagDA = 'N';
		AppState.vHr = '';
		AppState.vIdentifier = '';
		AppState.vInputCVV = '';
		AppState.vInterDigitTimeout = '6s';
		AppState.vIVR_RMNCallerFlag = '';
		AppState.vIVR_Skill = '';
		AppState.vIVRAccess = '';
		AppState.vKiddyAccFlag = 'N';
		AppState.vLang = '';
		AppState.vLangFlag = '';
		AppState.vLastCardNum = '';
		AppState.vLastMenuId = '';
		AppState.vLocalTxnDatetime = '';
		AppState.vLocalTxnDt = '';
		AppState.vLocalTxnTime = '';
		AppState.vMainMenu = '';
		AppState.vMenuID = '';
		AppState.vMenuInput = '';
		AppState.vMin = '';
		AppState.vMobileAuth = '';
		AppState.vMonth = '';
		AppState.vMultipleAcc = '';
		AppState.vMYDATE = '';
		AppState.vNewPin = '';
		AppState.VOXFILEDIR = initSystemTypeVariable('VOXFILEDIR','../Resources/Prompts');
		AppState.vPgenFlag = '';
		AppState.vPinActCode = '';
		AppState.vProcCode = '';
		AppState.vProductInfo = 'Debit';
		AppState.vPsFlag = '';
		AppState.vReEnterPin = '';
		AppState.vRelNum = '';
		AppState.vResponse = '';
		AppState.vResult = '';
		AppState.vRetRefNo = '';
		AppState.vReturnReason = '';
		AppState.vSec = '';
		AppState.vSTAN = '';
		AppState.vStartTime = '';
		AppState.vStDate = '';
		AppState.vStTime = '';
		AppState.vSubCallFlag = '';
		AppState.vTempCardNum = '';
		AppState.vTempCCNumber = '';
		AppState.vTempCustName = '';
		AppState.vTempTrav1 = '';
		AppState.vTransFlag = '';
		AppState.vTransmTime = '';
		AppState.vTrav1 = '';
		AppState.vTrav2 = '';
		AppState.vTrav3 = '';
		AppState.vTrav4 = '';
		AppState.vTravProduct = '';
		AppState.vTSSegment = '';
		AppState.vTxnANI = '';
		AppState.vTxnDuration = '';
		AppState.vTxnEndDate = '';
		AppState.vTxnEndTime = '';
		AppState.vTxnStDate = '';
		AppState.vTxnStTime = '';
		AppState.vUserID = '';
		AppState.vYear = '';
		AppState.vCreditCard = '';
		AppState.vErrorCode = '';
		AppState.vTicketID = '';
		AppState.Looping1_inprogress = false;
		AppState.Looping1_cursor = undefined;
		AppState.Looping1_record = undefined;
		AppState.Looping2_inprogress = false;
		AppState.Looping2_cursor = undefined;
		AppState.Looping2_record = undefined;
		AppState.Looping3_inprogress = false;
		AppState.Looping3_cursor = undefined;
		AppState.Looping3_record = undefined;
		AppState.Looping4_inprogress = false;
		AppState.Looping4_cursor = undefined;
		AppState.Looping4_record = undefined;
		AppState.Looping5_inprogress = false;
		AppState.Looping5_cursor = undefined;
		AppState.Looping5_record = undefined;
	</script>

		
	<!-- Global Scripts -->
	<script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/en-US/en-US.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/en-IN/en-IN.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/hi-IN/hi-IN.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/mr-IN/mr-IN.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/ta-IN/ta-IN.js'" />
	<script>var f = new Format();</script>

	
	<script srcexpr="AppState.VOXFILEDIR + '/en-US/customprompts.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/en-IN/customprompts.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/hi-IN/customprompts.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/mr-IN/customprompts.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/ta-IN/customprompts.js'" />
	
	
	<!-- Global Properties declarations -->
	<property name="com.genesyslab.logtoasr" value="false" />   	
	<property name="com.genesyslab.loglevel" value="5" />

	<!-- Metadata information -->
	<meta name="com.genesyslab.studio.resourcePath" content="/Callflows/sub_CC_Card_Activation.callflow"/>

	<!-- Global links -->
	<form>	
		<!-- VAR Parent Action Param -->
		<var name="varActionParentId" expr="''"/>
		<var name="ObjCall" expr="''"/>
		<var name="vAccNum" expr="''"/>
		<var name="vAPIN" expr="''"/>
		<var name="vConfCall" expr="''"/>
		<var name="vDebitCRNInput" expr="''"/>
		<block name="paramAssignment">
			<assign name="AppState.ObjCall" expr="ObjCall"/>
			<assign name="AppState.vAccNum" expr="vAccNum"/>
			<assign name="AppState.vAPIN" expr="vAPIN"/>
			<assign name="AppState.vConfCall" expr="vConfCall"/>
			<assign name="AppState.vDebitCRNInput" expr="vDebitCRNInput"/>
		</block>
		<block name="varAction">
			<if cond="varActionParentId==''">
				<log label="com.genesyslab.var.ActionStart" gvp:cond="AppState.EnableReports">sub_CC_Card_Activation</log>
			<else/>
				<log label="com.genesyslab.var.ActionStart" gvp:cond="AppState.EnableReports">sub_CC_Card_Activation|parentID=<value expr="varActionParentId"/></log>
			</if>
		</block>
		<block>
			<log expr="'Running sub_CC_Card_Activation workflow.'"/>
			<log expr="'Code Generated by Composer: 8.1.450.20.'"/>
			<log expr="'Diagram created/upgraded by Composer: Composer 8.1.450.20.'"/>
			<log expr="'Project version: 8.1.450.20.'"/>
			<log expr="'Diagram version: 1.0 CreatedOn: .'"/>
			<goto next="#Entry1" />
		</block>
	</form>

	<!-- This is the Exit block -->
	<form id="Exit1">
		<block>
			<log label="com.genesyslab.var.ActionEnd" gvp:cond="AppState.EnableReports">sub_CC_Card_Activation|UNKNOWN</log>
			<return/>
  		</block>
	</form>

	<!-- This is the SetLanguage block -->
	<form id="SetLanguage_Entry">
		<block>
			<assign name="AppState.APP_LANGUAGE" expr="AppState.vLang" />
			<assign name="AppState.APP_ASR_LANGUAGE" expr="AppState.vLang" />
		</block>
		<block>
			<goto next="#Log2_Creditcard" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching1">
		<block>
			<if cond="AppState.vCCConfAuth=='APINGENR'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_Conf_APIN" />
			</if>
			<goto next="#Assign_Initial" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_Conf_APIN">
		<block>
			
			<assign name="AppState.ANI" expr="AppState.IVR_ANI" />				
			<goto next="#Assign_Initial" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_ANILength">
		<block>
			<if cond="AppState.ANI.length&gt;'10'">
				
				<!-- Post Action -->
				<script>try{
				AppState.ANI.slice(2,12)
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Log1" />
			</if>
			<goto next="#Log1" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="Log1">
		<block>
			<log gvp:level="1">
				<value expr="&quot;AppState.ANI=&quot;+AppState.ANI"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Subdialog_650000" />
    	</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Subdialog_650000">

		<subdialog name="Subdialog_650000Subdialog" fetchhint="prefetch"  src="../src-gen/sub_650000.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="Subdialog_650000Subdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="Subdialog_650000Subdialog.ObjCall" /> 
  				</if>
				<if cond="Subdialog_650000Subdialog.vActCode != 'undefined'">
  					<assign name="AppState.vActCode" expr="Subdialog_650000Subdialog.vActCode" /> 
  				</if>
				<if cond="Subdialog_650000Subdialog.vErrorCode != 'undefined'">
  					<assign name="AppState.vErrMsg" expr="Subdialog_650000Subdialog.vErrorCode" /> 
  				</if>
				<goto next="#Branching_650000ActCode" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Log block -->
	<form id="Log2_Creditcard">
		<block>
			<log gvp:level="1">
				<value expr="'AppState.vCreditCard'+AppState.vCreditCard"/>
			</log>
			<log gvp:level="1">
				<value expr="'AppState.ObjCall.vCreditCard 1'+AppState.ObjCall.vCreditCard"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Branching1" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_650000ActCode">
		<block>
			<if cond="(AppState.ObjCall.vActCode =='000') &amp;&amp; (AppState.ObjCall.vBlockCode =='P')">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_CTLReg" />
			</if>
			<if cond="AppState.ObjCall.vActCode == '000'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_NonPBlock" />
			</if>
			<if cond="AppState.ObjCall.vActCode == '118'">
				
				<!-- This is the OutLink -->
				<goto next="#Looping4" />
			</if>
			<if cond="AppState.ObjCall.vActCode == '114'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign28" />
			</if>
			<if cond="getBkndDwnValue(AppState.ObjCall.vActCode)=='DOWN'">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Chk_Bkend_Counter" />
			</if>
			<goto next="#Prompt_SystemUN" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt_SystemUN">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt_SystemUNP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.SYSTEM.UNAVAILABLE.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign_AT" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_AT">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_Initial">
		<block>
			
			<assign name="AppState.MYDATE" expr="new Date();" />
			<assign name="AppState.vDate" expr="AppState.MYDATE.getDate()" />
			<assign name="AppState.vYear" expr="AppState.MYDATE.getFullYear()" />
			<assign name="AppState.vHr" expr="AppState.MYDATE.getHours()" />
			<assign name="AppState.vMin" expr="AppState.MYDATE.getMinutes()" />
			<assign name="AppState.vSec" expr="AppState.MYDATE.getSeconds()" />
			<assign name="AppState.vMonth" expr="AppState.MYDATE.getMonth()+1" />
			<assign name="AppState.vProcCode" expr="'650000'" />
			<assign name="AppState.vStartTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vCaptureDT" expr="ParseCaptureDate(AppState.vYear,AppState.vMonth,AppState.vDate)" />
			<assign name="AppState.vLocalTxnDatetime" expr="LocalTrnxTime(AppState.vCaptureDT,AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vTransmTime" expr="(AppState.vLocalTxnDatetime).slice(2, 12)" />
			<assign name="AppState.vSTAN" expr="(AppState.vLocalTxnDatetime).slice(8, 14)" />
			<assign name="AppState.vLocalTxnDt" expr="(AppState.vLocalTxnDatetime).slice(8, 14)" />
			<assign name="AppState.vLocalTxnTime" expr="(AppState.vLocalTxnDatetime).slice(4, 8)" />
			<assign name="AppState.vRetRefNo" expr="(AppState.vLocalTxnDatetime).slice(2, 14)" />
			<assign name="AppState.vAPIN" expr="AppState.vAPIN.slice(0, 4)" />
			<assign name="AppState.vTxnStTime" expr="LocalTime(AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vTxnStDate" expr="GetDate()" />
			<assign name="AppState.vStTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vMenuID" expr="'2060'" />
			<assign name="AppState.vLangFlag" expr="GetLangFlag(AppState.vLangFlag)" />
			<assign name="AppState.vTempCCNumber" expr="'000' + AppState.vCreditCardCRNInput" />
			<assign name="AppState.vLastMenuId" expr="'2060'" />				
			<goto next="#Branching_ANILength" />
		</block>
	</form>
	<!-- This is the Entry block -->
	<form id="Entry1">
		<block name="Entry">
			<goto next="#ECMAScript_Lang" />
		</block>
	</form>	
	
	<catch event="connection.disconnect.hangup">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#AssignDisconnectError" />
    </catch>
	<catch event="error.semantic">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#AssignSemanticError" />
    </catch>
	<catch event="error">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#ECMAScript_AssigntoObject" />
    </catch>
	<catch event=".">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#ECMAScript_AssigntoObject" />
    </catch>    
    

	<!-- This is the Log block -->
	<form id="Copy_1_Log1">
		<block>
			<log gvp:level="1">
				<value expr="&quot;AppState.ANI=&quot;+AppState.ANI"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vCreditCardCRNInput=&quot;+AppState.vCreditCardCRNInput"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vSTAN=&quot;+AppState.vSTAN"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vLocalTxnDatetime=&quot;+AppState.vLocalTxnDatetime"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vDOB=&quot;+AppState.vDOB"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Subdialog_650000" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_CTLReg">
		<block>
			
			<assign name="AppState.vMobileAuth" expr="'Y'" />
			<assign name="AppState.vCCAuthAction" expr="'MOB'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'RMN P Block;'" />				
			<goto next="#Assign_MOBReg" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_MOBReg">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+''+'Register CLI – CTL;'" />				
			<goto next="#CCBlockCode" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="CCBlockCode">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="vBlockCode" expr="AppState.ObjCall.vBlockCode" />	
		<block>
			<data name="CCBlockCodeData" src="../src/ReadXMLCreditCard.aspx" method="post"  enctype="multipart/form-data"
				namelist="AppStateString vBlockCode" />
        	<if cond="typeof CCBlockCodeData.errorMsg == 'undefined'">
        		<assign name="AppState.CCBlockCodeResult" expr="CCBlockCodeData" />
				<goto next="#Assign61" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="CCBlockCodeData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Assign24" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Assign24" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="IVRAccessCheck">
		<block>
			<if cond="AppState.vIVRAccess == 'Yes' || AppState.vIVRAccess == 'YES'">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Assign_Initial" />
			</if>
			<goto next="#Prompt2" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_1_Assign_Initial">
		<block>
			
			<assign name="AppState.MYDATE" expr="new Date();" />
			<assign name="AppState.vDate" expr="AppState.MYDATE.getDate()" />
			<assign name="AppState.vYear" expr="AppState.MYDATE.getFullYear()" />
			<assign name="AppState.vHr" expr="AppState.MYDATE.getHours()" />
			<assign name="AppState.vMin" expr="AppState.MYDATE.getMinutes()" />
			<assign name="AppState.vSec" expr="AppState.MYDATE.getSeconds()" />
			<assign name="AppState.vMonth" expr="AppState.MYDATE.getMonth()" />
			<assign name="AppState.vEndTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vTxnEndDate" expr="GetDate()" />
			<assign name="AppState.vTxnEndTime" expr="LocalTime(AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vTxnDuration" expr="(AppState.vEndTime-AppState.vStTime)/1000" />
			<assign name="AppState.vTransFlag" expr="GetTransFlag(AppState.vActCode)" />
			<assign name="AppState.vProcCode" expr="'931500'" />
			<assign name="AppState.vCaptureDT" expr="ParseCaptureDate(AppState.vYear,AppState.vMonth,AppState.vDate)" />
			<assign name="AppState.vLocalTxnDatetime" expr="LocalTrnxTime(AppState.vCaptureDT,AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vSTAN" expr="(AppState.vLocalTxnDatetime).slice(8, 14)" />
			<assign name="AppState.vStartTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vCreditCardCRNInput" expr="AppState.vCreditCardCRNInput" />				
			<goto next="#Log2" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="Log2">
		<block>
			<log gvp:level="1">
				<value expr="'AppState.ObjCall.vCreditCard 1'+AppState.ObjCall.vCreditCard"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Branching_chk_Amex" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_chk_Amex">
		<block>
			<if cond="AppState.ObjCall.vCreditCard.length=='15'">
				
				<!-- This is the OutLink -->
				<goto next="#ECMAScript3" />
			</if>
			<goto next="#Log3" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="Log3">
		<block>
			<log gvp:level="1">
				<value expr="'AppState.ObjCall.vCreditCard 1'+AppState.ObjCall.vCreditCard"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vCustName=&quot;+AppState.vCustName"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vCustSeg=&quot;+AppState.vCustSeg"/>
			</log>
			<log gvp:level="1">
				<value expr="&quot;AppState.vUserID=&quot;+AppState.vUserID"/>
			</log>
    	</block>
    	<block>
    		<goto next="#ECMAScript4" />
    	</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Subdialog_931500">

		<subdialog name="Subdialog_931500Subdialog" fetchhint="prefetch"  src="../src-gen/sub_931500.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="Subdialog_931500Subdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="Subdialog_931500Subdialog.ObjCall" /> 
  				</if>
				<goto next="#Branching2" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Branching2">
		<block>
			<if cond="AppState.ObjCall.vActCode == '139' || AppState.ObjCall.vActCode == '130' || AppState.ObjCall.vActCode == '000'">
				
				<!-- This is the OutLink -->
				<goto next="#Branching3" />
			</if>
			<if cond="AppState.ObjCall.vActCode &gt;='950' &amp;&amp; AppState.ObjCall.vActCode &lt;= '970'">
				
				<!-- This is the OutLink -->
				<goto next="#Prompt1" />
			</if>
			<goto next="#Assign2" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching3">
		<block>
			<if cond="AppState.vCustName == '' || AppState.vCustName == ' ' || AppState.vCustName== 'null' || AppState.vCustName == null || AppState.vCustName == 'undefined'">
				
				<!-- This is the OutLink -->
				<goto next="#ChkCustType" />
			</if>
			<goto next="#ECMAScript1" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt1">
        
    	<block name="Prompt1P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.SYSTEM.UNAVAILABLE.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#Assign1" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign1">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vCustSeg" expr="'SystemDown'" />
			<assign name="AppState.v_Reasons" expr="'RCC_BackendFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign2">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ChkCustType">
		<block>
			<if cond="AppState.ObjCall.vCustseg.search('GB')!=-1||AppState.ObjCall.vCustseg.search('Z')!=-1">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_GB_skill" />
			</if>
			<if cond="AppState.ObjCall.vCustseg=='|'">
				
				<!-- This is the OutLink -->
				<goto next="#InputDOB" />
			</if>
			<if cond="AppState.ObjCall.vCustseg.search('WS')!=-1||AppState.ObjCall.vCustseg('GPC')!=-1||AppState.ObjCall.vCustseg.search('WM')!=-1">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_Ws_skill" />
			</if>
			<if cond="AppState.ObjCall.vCustseg.search('TS')!=-1">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_Ts_skill" />
			</if>
			<if cond="AppState.ObjCall.vCustseg.search('GS')!=-1">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_GS_skill" />
			</if>
			<goto next="#InputDOB" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_Ws_skill">
		<block>
			
			<assign name="AppState.IVR_Skill" expr="'Skill_'" />				
			<goto next="#Branching4" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching4">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#Success_Trf_SegmentWise" />
			</if>
			<goto next="#InputDOB" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Success_Trf_SegmentWise">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vCCAuthAction" expr="'MOB'" />
			<assign name="AppState.vTrav4" expr="'117'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Input block -->
	<form id="InputDOB">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="InputDOBP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'Temp_Block.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="InputDOBField" type="digits?minlength=8;maxlength=8">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="#" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="InputDOBField">
    		<assign name="AppState.vDOB" expr="InputDOBField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign_650000" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.NOINPUT.wav'"></audio>
  		</prompt>
  		<clear namelist="InputDOBP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.INVALID.wav'"></audio>
  		</prompt>
  		<clear namelist="InputDOBP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#Assign23" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#Assign23" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_650000">
		<block>
			<log gvp:level="4">
				<value expr="AppState.vActCode"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.MYDATE" expr="new Date();" />
			<assign name="AppState.vDate" expr="AppState.MYDATE.getDate()" />
			<assign name="AppState.vYear" expr="AppState.MYDATE.getFullYear()" />
			<assign name="AppState.vHr" expr="AppState.MYDATE.getHours()" />
			<assign name="AppState.vMin" expr="AppState.MYDATE.getMinutes()" />
			<assign name="AppState.vSec" expr="AppState.MYDATE.getSeconds()" />
			<assign name="AppState.vStTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vMonth" expr="AppState.MYDATE.getMonth()+1" />
			<assign name="AppState.vTxnStTime" expr="LocalTime(AppState.varHr,AppState.varMin,AppState.varSec)" />
			<assign name="AppState.vTxnStDate" expr="GetDate()" />
			<assign name="AppState.vProcCode" expr="'650000'" />
			<assign name="AppState.vCaptureDT" expr="ParseCaptureDate(AppState.vYear,AppState.vMonth,AppState.vDate)" />
			<assign name="AppState.vLocalTxnDatetime" expr="LocalTrnxTime(AppState.vCaptureDT,AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vSTAN" expr="(AppState.vLocalTxnDatetime).slice(8, 14)" />
			<assign name="AppState.vMenuID" expr="'207'" />
			<assign name="AppState.vLastMenuId" expr="'207'" />				
			<goto next="#ECMAScript5" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Subdialog_650000_DOB">

		<subdialog name="Subdialog_650000_DOBSubdialog" fetchhint="prefetch"  src="../src-gen/sub_650000.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="Subdialog_650000_DOBSubdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="Subdialog_650000_DOBSubdialog.ObjCall" /> 
  				</if>
				<if cond="Subdialog_650000_DOBSubdialog.vActCode != 'undefined'">
  					<assign name="AppState.vActCode" expr="Subdialog_650000_DOBSubdialog.vActCode" /> 
  				</if>
				<if cond="Subdialog_650000_DOBSubdialog.vErrorCode != 'undefined'">
  					<assign name="AppState.vErrorCode" expr="Subdialog_650000_DOBSubdialog.vErrorCode" /> 
  				</if>
				<goto next="#Branching_DOB" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_Ts_skill">
		<block>
			
			<assign name="AppState.IVR_Skill" expr="'Skill_'" />				
			<goto next="#InputDOB" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_GB_skill">
		<block>
			
			<assign name="AppState.IVR_Skill" expr="'Skill_'" />				
			<goto next="#InputDOB" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_GS_skill">
		<block>
			
			<assign name="AppState.IVR_Skill" expr="'Skill_'" />				
			<goto next="#InputDOB" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript1">
		<block>
			<script>
				AppState.vCustName=replaceCharacter1(AppState.vCustName);
					AppState.vTempCustName=AppState.vCustName;
					AppState.vCustName;
					if(AppState.vCustSeg==null||AppState.vCustSeg=='undefined')
					{
					AppState.vCustSeg='';
					}
					AppState.vCustName=getJointName(AppState.vAccStatus,AppState.vCustName);
					AppState.vCreditCardCRNInput=RemoveAmexCard(AppState.vCreditCardCRNInput)
			</script>	
			<goto next="#ChkCustType" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt2">
        
    	<block name="Prompt2P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCCardBlock.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#ECMAScript2" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript2">
		<block>
			<script>
				AppState.vSubCallFlag='AT';
					'';
					if (AppState.vTSSegment=='Y'){
					AppState.vTrav1=AppState.vTrav1+'TSCC137;';}
					else{AppState.vTrav1=AppState.vTrav1+'WLNCC137;';}
			</script>	
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_DOB">
		<block>
			<if cond="AppState.ObjCall.vActCode == '000'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign3" />
			</if>
			<if cond="AppState.ObjCall.vActCode == '222' || AppState.ObjCall.vActCode == '223'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign12" />
			</if>
			<if cond="AppState.ObjCall.vActCode == '114'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign14" />
			</if>
			<if cond="getBkndDwnValue(AppState.ObjCall.vActCode)=='DOWN'">
				
				<!-- This is the OutLink -->
				<goto next="#Chk_Bkend_Counter" />
			</if>
			<if cond="AppState.ObjCall.vActCode &gt;= '950' &amp;&amp; AppState.ObjCall.vActCode &lt;= '970'">
				
				<!-- This is the OutLink -->
				<goto next="#Prompt1" />
			</if>
			<goto next="#Assign16" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign3">
		<block>
			
			<assign name="AppState.vTravProduct" expr="'CA'" />
			<assign name="AppState.vAuthFlag" expr="'Y'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Valid DOB;'" />				
			<goto next="#Branching6" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching6">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#AmexInputCVV" />
			</if>
			<goto next="#InputCVV" />
		</block>
	</form>

	<!-- This is the Input block -->
	<form id="AmexInputCVV">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLangFlag + '/' + AppState.vLangFlag + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLangFlag;
	            AppState.APP_ASR_LANGUAGE = AppState.vLangFlag;
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="AmexInputCVVP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCAmexCVV.wav'"></audio>
    		</prompt>
		</block>
		
		
		<field name="AmexInputCVVField" type="digits?minlength=4;maxlength=4">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="#" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="AmexInputCVVField">
    		<assign name="AppState.vInputCVV" expr="AmexInputCVVField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign4" />
    	</filled>
			
		<catch event="noinput" count="1">
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNo_Input.wav'"></audio>
  		</prompt>
  		</catch>
			
		<catch event="nomatch" count="1">
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
  		</prompt>
  		</catch>
		<catch event="noinput" count="2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch" count="2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#Assign20" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#Assign17" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign4">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Valid CVV entered;'" />
			<assign name="AppState.vLastMenuId" expr="'2102'" />				
			<goto next="#Copy_2_IVRAccessCheck" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Copy_2_IVRAccessCheck">
		<block>
			<if cond="AppState.vCVV2 == AppState.vInputCVV">
				
				<!-- This is the OutLink -->
				<goto next="#Assign5" />
			</if>
			<goto next="#Assign6" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign5">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Correct CVV;'" />				
			<goto next="#Assign62" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_ActCode">
		<block>
			<if cond="AppState.vPinActCode == '000' || AppState.vPinActCode == '118'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_Values222004" />
			</if>
			<goto next="#Assign11" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_Values222004">
		<block>
			
			<assign name="AppState.vProcCode" expr="'777001'" />				
			<goto next="#ECMAScript6" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign6">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Incorrect CVV backend;'" />				
			<goto next="#Looping1" />
		</block>
	</form>
	<!-- This is the Looping block -->
	<form id="Looping1">
		<block>
			<script>
				try {
					// if not initialized, initialize the counter/iterator
					if (AppState.Looping1_inprogress == undefined || AppState.Looping1_inprogress == false) {
						AppState.vCounter = 1;
						AppState.Looping1_inprogress = true;
					} else {
						++AppState.vCounter;
						// check if at least one of the exit condition(s) is met
						if (!(AppState.vCounter &lt;= 1)) {
							AppState.Looping1_inprogress = false;
						} else {
						}
					}
				} catch (e) {
					AppState.Looping1_inprogress = false;
				}
			</script>
			
  			<if cond="AppState.Looping1_inprogress == true">
				<!-- This is the NextLink -->
				<goto next="#Prompt3" />
			<else/>
				<!-- This is the ExitLink -->
				<goto next="#Prompt4" />
			</if>
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt3">
        
    	<block name="Prompt3P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#AmexInputCVV" />
    	</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt4">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt4P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCExceededMaxTime.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign7" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign7">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Input block -->
	<form id="InputCVV">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="InputCVVP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNormalCVV.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="InputCVVField" type="digits?minlength=3;maxlength=3">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="#" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="InputCVVField">
    		<assign name="AppState.vInputCVV" expr="InputCVVField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign8" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNoInputTryAg.wav'"></audio>
  		</prompt>
  		<clear namelist="InputCVVP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
  		</prompt>
  		<clear namelist="InputCVVP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#Assign22" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#Assign21" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign8">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Customer entered CVV';" />				
			<goto next="#Copy_1_IVRAccessCheck" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Copy_1_IVRAccessCheck">
		<block>
			<if cond="AppState.ObjCall.vCVV == AppState.vInputCVV">
				
				<!-- This is the OutLink -->
				<goto next="#Assign9" />
			</if>
			<goto next="#Assign10" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign9">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Correct CVV;'" />				
			<goto next="#Assign62" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign10">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Incorrect CVV;'" />				
			<goto next="#Looping2" />
		</block>
	</form>
	<!-- This is the Looping block -->
	<form id="Looping2">
		<block>
			<script>
				try {
					// if not initialized, initialize the counter/iterator
					if (AppState.Looping2_inprogress == undefined || AppState.Looping2_inprogress == false) {
						AppState.vCounter = 1;
						AppState.Looping2_inprogress = true;
					} else {
						++AppState.vCounter;
						// check if at least one of the exit condition(s) is met
						if (!(AppState.vCounter &lt;= 1)) {
							AppState.Looping2_inprogress = false;
						} else {
						}
					}
				} catch (e) {
					AppState.Looping2_inprogress = false;
				}
			</script>
			
  			<if cond="AppState.Looping2_inprogress == true">
				<!-- This is the NextLink -->
				<goto next="#Prompt5" />
			<else/>
				<!-- This is the ExitLink -->
				<goto next="#Prompt6" />
			</if>
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt5">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt5P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNormalMaxTryCVV.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#InputCVV" />
    	</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt6">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt6P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCExceededMaxTime.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign7" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign11">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign12">
		<block>
			
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Looping3" />
		</block>
	</form>
	<!-- This is the Looping block -->
	<form id="Looping3">
		<block>
			<script>
				try {
					// if not initialized, initialize the counter/iterator
					if (AppState.Looping3_inprogress == undefined || AppState.Looping3_inprogress == false) {
						AppState.vCounter = 1;
						AppState.Looping3_inprogress = true;
					} else {
						++AppState.vCounter;
						// check if at least one of the exit condition(s) is met
						if (!(AppState.vCounter &lt;= 1)) {
							AppState.Looping3_inprogress = false;
						} else {
						}
					}
				} catch (e) {
					AppState.Looping3_inprogress = false;
				}
			</script>
			
  			<if cond="AppState.Looping3_inprogress == true">
				<!-- This is the NextLink -->
				<goto next="#Prompt7" />
			<else/>
				<!-- This is the ExitLink -->
				<goto next="#Prompt8" />
			</if>
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt7">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt7P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CC00.DOB.NOTMATCH.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#InputDOB" />
    	</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt8">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLangFlag + '/' + AppState.vLangFlag + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLangFlag;
	            AppState.APP_ASR_LANGUAGE = AppState.vLangFlag;
	        </script>
        </block>
        
        
    	<block name="Prompt8P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCExceededMaxTime.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign13" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign13">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2 + 'Wrong DOB (CTL);'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign14">
		<block>
			
			<assign name="AppState.vATMPinResult" expr="'Act_114'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Invalid Credit Card no. Entered;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />
			<assign name="AppState.v_Reasons" expr="'RCC_ApinFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Chk_Bkend_Counter">
		<block>
			<if cond="AppState.vBkndDownCounter&lt;2">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Prompt_BkndFail_Q_1" />
			</if>
			<goto next="#Copy_1_Assign_MenuID_BkndDown" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Copy_1_Prompt_BkndFail_Q_1">
        
    	<block name="Copy_1_Prompt_BkndFail_Q_1P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'BACKEND_FAIL_Q.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#Assign15" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign15">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'HostDown_65'" />
			<assign name="AppState.vBkndDownCounter" expr="AppState.vBkndDownCounter+1" />
			<assign name="AppState.v_Reasons" expr="'RCC_BackendFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_1_Assign_MenuID_BkndDown">
		<block>
			
			<assign name="AppState.vTrav1" expr="AppState.vTrav1+'CCDown02;'" />				
			<goto next="#Prompt1" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign16">
		<block>
			
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Looping3" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign17">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid invalid CVV entered;'" />				
			<goto next="#Prompt9" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt9">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt9P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign18" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign18">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vCallEndReason" expr="'3'" />
			<assign name="AppState.v_Reasons" expr="'RCC_AMEX+'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'No invalid routed to officer ;'" />				
			<goto next="#Prompt10" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt10">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLangFlag + '/' + AppState.vLangFlag + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLangFlag;
	            AppState.APP_ASR_LANGUAGE = AppState.vLangFlag;
	        </script>
        </block>
        
        
    	<block name="Prompt10P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.EXCEEDED.RETRIES.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign19" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign19">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vCallEndReason" expr="'3'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign20">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid No CVV entered;'" />				
			<goto next="#Prompt11" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt11">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt11P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNo_Input.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign18" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign21">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'InValid CVV length entered;'" />				
			<goto next="#Prompt9" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign22">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'No CVV entered;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Prompt11" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign23">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'No DOB;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Prompt10" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign24">
		<block>
			
			<assign name="AppState.vIVRAccess" expr="'No'" />				
			<goto next="#IVRAccessCheck" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_NonPBlock">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Card is in active status or other than P block status.;'" />
			<assign name="AppState.vBlockFlag" expr="'N'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>
	<!-- This is the Looping block -->
	<form id="Looping4">
		<block>
			<script>
				try {
					// if not initialized, initialize the counter/iterator
					if (AppState.Looping4_inprogress == undefined || AppState.Looping4_inprogress == false) {
						AppState.vCount = 1;
						AppState.Looping4_inprogress = true;
					} else {
						++AppState.vCount;
						// check if at least one of the exit condition(s) is met
						if (!(AppState.vCount &lt;= 1)) {
							AppState.Looping4_inprogress = false;
						} else {
						}
					}
				} catch (e) {
					AppState.Looping4_inprogress = false;
				}
			</script>
			
  			<if cond="AppState.Looping4_inprogress == true">
				<!-- This is the NextLink -->
				<goto next="#Branching8" />
			<else/>
				<!-- This is the ExitLink -->
				<goto next="#Branching_chkPblock" />
			</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching8">
		<block>
			<if cond="AppState.ANI.length&lt;10">
				
				<!-- This is the OutLink -->
				<goto next="#Branching_chkPblock" />
			</if>
			<goto next="#Copy_2_Assign_Initial" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_chkPblock">
		<block>
			<if cond="(AppState.vActCode == '118') &amp;&amp; (AppState.vBlockCode =='P')">
				
				<!-- This is the OutLink -->
				<goto next="#Assign25" />
			</if>
			<goto next="#Assign27" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign25">
		<block>
			
			<assign name="AppState.vTrav2" expr="'NONRMN P Block'" />				
			<goto next="#Prompt12" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt12">
        
    	<block name="Prompt12P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CardPBlockedNonRMN.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#Assign26" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign26">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'DISCONNECT'" />
			<assign name="AppState.v_Reasons" expr="'RCC_CardBlocked'" />
			<assign name="AppState.vCallEndReason" expr="'6'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign27">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'Main_Menu'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_2_Assign_Initial">
		<block>
			
			<assign name="AppState.MYDATE" expr="new Date();" />
			<assign name="AppState.vDate" expr="AppState.MYDATE.getDate()" />
			<assign name="AppState.vYear" expr="AppState.MYDATE.getFullYear()" />
			<assign name="AppState.vHr" expr="AppState.MYDATE.getHours()" />
			<assign name="AppState.vMin" expr="AppState.MYDATE.getMinutes()" />
			<assign name="AppState.vSec" expr="AppState.MYDATE.getSeconds()" />
			<assign name="AppState.vMonth" expr="AppState.MYDATE.getMonth()+1" />
			<assign name="AppState.vProcCode" expr="'650000'" />
			<assign name="AppState.vStartTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vCaptureDT" expr="ParseCaptureDate(AppState.vYear,AppState.vMonth,AppState.vDate)" />
			<assign name="AppState.vLocalTxnDatetime" expr="LocalTrnxTime(AppState.vCaptureDT,AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vTransmTime" expr="(AppState.vLocalTxnDatetime).slice(2, 12)" />
			<assign name="AppState.vSTAN" expr="(AppState.vLocalTxnDatetime).slice(8, 14)" />
			<assign name="AppState.vLocalTxnDt" expr="(AppState.vLocalTxnDatetime).slice(8, 14)" />
			<assign name="AppState.vLocalTxnTime" expr="(AppState.vLocalTxnDatetime).slice(4, 8)" />
			<assign name="AppState.vRetRefNo" expr="(AppState.vLocalTxnDatetime).slice(2, 14)" />
			<assign name="AppState.vAPIN" expr="AppState.vAPIN.slice(0, 4)" />
			<assign name="AppState.vTxnStTime" expr="LocalTime(AppState.vHr,AppState.vMin,AppState.vSec)" />
			<assign name="AppState.vTxnStDate" expr="GetDate()" />
			<assign name="AppState.vStTime" expr="AppState.MYDATE.getTime()" />
			<assign name="AppState.vMenuID" expr="'2008'" />
			<assign name="AppState.vLangFlag" expr="GetLangFlag(AppState.vLangFlag)" />
			<assign name="AppState.vLastMenuId" expr="'2008'" />
			<assign name="AppState.ANI" expr="'91'+AppState.ANI" />				
			<goto next="#Copy_1_Log1" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign28">
		<block>
			
			<assign name="AppState.vATMPinResult" expr="'Act_114'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Invalid Credit Card no. Entered;'" />
			<assign name="AppState.v_Reasons" expr="'RCC_AuthFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Copy_1_Chk_Bkend_Counter">
		<block>
			<if cond="AppState.vBkndDownCounter&lt;2">
				
				<!-- This is the OutLink -->
				<goto next="#Prompt13" />
			</if>
			<goto next="#Assign_MenuID_BkndDown" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt13">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt13P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'BACKEND_FAIL_Q.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign29" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign29">
		<block>
			
			<assign name="AppState.vBkndDownCounter" expr="AppState.vBkndDownCounter+1" />
			<assign name="AppState.v_Reasons" expr="'RCC_BackendFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_MenuID_BkndDown">
		<block>
			
			<assign name="AppState.vTrav1" expr="AppState.vTrav1+'CCDown02;'" />				
			<goto next="#Prompt1" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Sub_WebService">

		<subdialog name="Sub_WebServiceSubdialog" fetchhint="prefetch"  src="../src-gen/sub_Websevice.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="Sub_WebServiceSubdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="Sub_WebServiceSubdialog.ObjCall" /> 
  				</if>
				<goto next="#Branching_Chk_ActionCode" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_Chk_ActionCode">
		<block>
			<if cond="(AppState.vActCode=='000') &amp;&amp; (AppState.vProcCode =='777001')">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_TicketID" />
			</if>
			<if cond="(AppState.vActCode=='000') &amp;&amp; (AppState.vProcCode =='777036')">
				
				<!-- This is the OutLink -->
				<goto next="#Assign_CardActivated" />
			</if>
			<if cond="AppState.vProcCode =='IVRSendSMS'">
				
				<!-- This is the OutLink -->
				<goto next="#Enter4digitATMPIN_Or_1APINGene" />
			</if>
			<if cond="getBkndDwnValue(AppState.varActCode)=='DOWN'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign55" />
			</if>
			<goto next="#Assign55" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_TicketID">
		<block>
			
			<assign name="AppState.vProcCode" expr="'777036'" />				
			<goto next="#Sub_WebService" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign_CardActivated">
		<block>
			
			<assign name="AppState.vProcCode" expr="'IVRSendSMS'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+''+'ActivationSuccesfull;'" />				
			<goto next="#Sub_WebService" />
		</block>
	</form>

	<!-- This is the Input block -->
	<form id="Enter4digitATMPIN_Or_1APINGene">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="Enter4digitATMPIN_Or_1APINGeneP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CC_ActivationPrompt.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="Enter4digitATMPIN_Or_1APINGeneField" type="digits?minlength=1;maxlength=4">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="#" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="Enter4digitATMPIN_Or_1APINGeneField">
    		<assign name="AppState.vAPIN" expr="Enter4digitATMPIN_Or_1APINGeneField" />
	        <script>resetLanguage()</script>
    		<goto next="#DOBAction" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNoInputTryAg.wav'"></audio>
  		</prompt>
  		<clear namelist="Enter4digitATMPIN_Or_1APINGeneP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCAuthInvalidEntry.wav'"></audio>
  		</prompt>
  		<clear namelist="Enter4digitATMPIN_Or_1APINGeneP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#ExceededAttempt_CardNumber" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#ExceededAttempt_CardNumber" />
    	</catch>
	</form>

	<!-- This is the Prompt block -->
	<form id="ExceededAttempt_CardNumber">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="ExceededAttempt_CardNumberP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCExceededMaxTime.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign30" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign30">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'DISCONNECT'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="DOBAction">
		<block>
			<if cond="AppState.varAPIN == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Assign31" />
			</if>
			<if cond="(AppState.vAPIN).length == 4">
				
				<!-- This is the OutLink -->
				<goto next="#Assign45" />
			</if>
			<goto next="#ExceededAttempt_CardNumber" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign31">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'RMN Customer Selected pin gen;'" />				
			<goto next="#InputNewPin" />
		</block>
	</form>

	<!-- This is the Input block -->
	<form id="InputNewPin">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<property name="com.genesyslab.private" value="true" />
		<block name="InputNewPinP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNewPin.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="InputNewPinField" type="digits?minlength=4;maxlength=4">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="#" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="InputNewPinField">
    		<assign name="AppState.vNewPin" expr="InputNewPinField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign35" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNoInputTryAg.wav'"></audio>
  		</prompt>
  		<clear namelist="InputNewPinP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
  		</prompt>
  		<clear namelist="InputNewPinP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#Branching9" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#Branching5" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching5">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#Assign32" />
			</if>
			<goto next="#Assign34" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign32">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Apin gen invalid APIN entered;'" />				
			<goto next="#Prompt14" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt14">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt14P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign33" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign33">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.v_Reasons" expr="'RCC_ApinFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign34">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Apin gen invalid APIN length entered;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Prompt14" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign35">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Valid  newApin entered;'" />
			<assign name="AppState.vLastMenuId" expr="'206'" />				
			<goto next="#InputReEnterNewPin" />
		</block>
	</form>

	<!-- This is the Input block -->
	<form id="InputReEnterNewPin">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<property name="com.genesyslab.private" value="true" />
		<block name="InputReEnterNewPinP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCReenterPin.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="InputReEnterNewPinField" type="digits?minlength=4;maxlength=4">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="#" /> 
			<property name="timeout" value="10s"/>
		</field>
    	<filled mode="all" namelist="InputReEnterNewPinField">
    		<assign name="AppState.vReEnterPin" expr="InputReEnterNewPinField" />
	        <script>resetLanguage()</script>
    		<goto next="#Assign39" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNoInputTryAg.wav'"></audio>
  		</prompt>
  		<clear namelist="InputReEnterNewPinP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCInvalid_Input.wav'"></audio>
  		</prompt>
  		<clear namelist="InputReEnterNewPinP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==2">
	        <script>resetLanguage()</script>
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
	        <script>resetLanguage()</script>
			<goto next="#Branching10" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
	        <script>resetLanguage()</script>
			<goto next="#Branching5" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching9">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#Assign36" />
			</if>
			<goto next="#Assign37" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign36">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Apin gen No Apin Input;'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign37">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Apin gen No Apin Input;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Prompt15" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt15">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt15P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCNo_Input.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign38" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign38">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.v_Reasons" expr="'RCC_ApinFail'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign39">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2 +''+ 'Valid length APIN entered;'" />				
			<goto next="#PinMatch" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching10">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#Assign40" />
			</if>
			<goto next="#Assign41" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign40">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Apin gen No Apin Input;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Prompt15" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign41">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Apin gen No Apin Input;'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />				
			<goto next="#Prompt15" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="PinMatch">
		<block>
			<if cond="AppState.vNewPin == AppState.vReEnterPin">
				
				<!-- This is the OutLink -->
				<goto next="#Assign42" />
			</if>
			<goto next="#Looping5" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign42">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2 + '' + ' APIN matched;'" />				
			<goto next="#WebService_APINEncryption" />
		</block>
	</form>
	<!-- This is the Looping block -->
	<form id="Looping5">
		<block>
			<script>
				try {
					// if not initialized, initialize the counter/iterator
					if (AppState.Looping5_inprogress == undefined || AppState.Looping5_inprogress == false) {
						AppState.vCounter = 1;
						AppState.Looping5_inprogress = true;
					} else {
						++AppState.vCounter;
						// check if at least one of the exit condition(s) is met
						if (!(AppState.vCounter &lt;= 1)) {
							AppState.Looping5_inprogress = false;
						} else {
						}
					}
				} catch (e) {
					AppState.Looping5_inprogress = false;
				}
			</script>
			
  			<if cond="AppState.Looping5_inprogress == true">
				<!-- This is the NextLink -->
				<goto next="#Prompt16" />
			<else/>
				<!-- This is the ExitLink -->
				<goto next="#Assign43" />
			</if>
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt16">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt16P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCPinNotMatch.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#InputNewPin" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign43">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2 + '' + ' APIN mismatched;'" />				
			<goto next="#Assign44" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign44">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.vAuthFlag" expr="'N'" />
			<assign name="AppState.v_Reasons" expr="'RCC_ExceedTries'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign45">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Valid Apin length entered;'" />
			<assign name="AppState.vLastMenuId" expr="'206'" />				
			<goto next="#Subdialog_CC_PinBlock" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="WebService_651000">

		<subdialog name="WebService_651000Subdialog" fetchhint="prefetch"  src="../src-gen/sub_WebService_651000.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="vAPIN" expr="AppState.vAPIN" />
			<param name="vAccNum" expr="AppState.vAccNum" />
			<param name="vConfCall" expr="AppState.vConfCall" />
			<param name="vDebitCRNInput" expr="AppState.vDebitCRNInput" />
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="WebService_651000Subdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="WebService_651000Subdialog.ObjCall" /> 
  				</if>
				<if cond="WebService_651000Subdialog.vBlockCode != 'undefined'">
  					<assign name="AppState.vBlockCode" expr="WebService_651000Subdialog.vBlockCode" /> 
  				</if>
				<goto next="#Branching11" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Branching11">
		<block>
			<if cond="AppState.vActCode == '000'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign46" />
			</if>
			<if cond="AppState.vActCode == '113'">
				
				<!-- This is the OutLink -->
				<goto next="#Chk_Bkend_Counter" />
			</if>
			<if cond="AppState.vActCode=='117'">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_ChkNoMatchCounter" />
			</if>
			<goto next="#Chk_Bkend_Counter" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign46">
		<block>
			
			<assign name="AppState.vATMPinResult" expr="'Act_114'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Authentication Successful;'" />
			<assign name="AppState.vAuthFlag" expr="'Y'" />
			<assign name="AppState.vPsFlag" expr="'Y'" />				
			<goto next="#Branching12" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching12">
		<block>
			<if cond="AppState.vCustSeg.search('WS')!=-1||AppState.vCustSeg.search('GPC')!=-1||AppState.vCustSeg.search('WM')!=-1">
				
				<!-- This is the OutLink -->
				<goto next="#Assign47" />
			</if>
			<goto next="#Branching13" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign47">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#Branching13" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching13">
		<block>
			<if cond="AppState.vCCConfAuth == 'APINGENR'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign48" />
			</if>
			<goto next="#Assign49" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign48">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign49">
		<block>
			
			<assign name="AppState.vMultipleAcc" expr="getMultipleAccNo1(AppState.vAccountNo_Out)" />
			<assign name="AppState.IVR_EnrollStatus" expr="'Not Enrolled'" />				
			<goto next="#Branching14" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching14">
		<block>
			<if cond="AppState.vCustomerID  == 'null' ||AppState.vCustomerID ==''||AppState.vCustomerID ==' '||AppState.vCustomerID ==null||AppState.vCustomerID  =='undefined'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign50" />
			</if>
			<goto next="#Assign51" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign50">
		<block>
			
			<assign name="AppState.VA_DETAILS" expr="getIWSAuthStringDB(AppState.vMultipleAcc,AppState.vTempCustName,AppState.vCustSeg)" />
			<assign name="AppState.vEnrollStatus" expr="getIWSEnrollmentStatus(AppState.vMultipleAcc)" />
			<assign name="AppState.IVR_AccStatus" expr="getAccountStatus(AppState.vAccStatus)" />
			<assign name="AppState.IVR_EnrollStatus" expr="'Not Enrolled'" />				
			<goto next="#Assign48" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign51">
		<block>
			
			<assign name="AppState.vPgenFlag" expr="'Y'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Copy_1_ChkNoMatchCounter">
		<block>
			<if cond="AppState.vCounter != 1">
				
				<!-- This is the OutLink -->
				<goto next="#Prompt17" />
			</if>
			<goto next="#Assign53" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt17">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt17P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.INVALID.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign52" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign52">
		<block>
			
			<assign name="AppState.vCounter" expr="AppState.vCounter+1" />				
			<goto next="#Enter4digitATMPIN_Or_1APINGene" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign53">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2 + 'Exceeded max tries;'" />
			<assign name="AppState.vCounter" expr="AppState.vCounter+1" />				
			<goto next="#Prompt18" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt18">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt18P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'INVALIDIN.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign54" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign54">
		<block>
			
			<assign name="AppState.vReturnReason" expr="'TPIN Tries Exceeded'" />
			<assign name="AppState.vSubCallFlag" expr="'DISCONNECT'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2 + 'InvalidPin tries Exceeded;'" />
			<assign name="AppState.vCallEndReason" expr="'3'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign55">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+''+'AT;'" />
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#Copy_1_Prompt_BkndFail_Q_1" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="WebService_650000_Generate">

		<subdialog name="WebService_650000_GenerateSubdialog" fetchhint="prefetch"  src="../src-gen/sub_650000.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="WebService_650000_GenerateSubdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="WebService_650000_GenerateSubdialog.ObjCall" /> 
  				</if>
				<if cond="WebService_650000_GenerateSubdialog.vActCode != 'undefined'">
  					<assign name="AppState.vActCode" expr="WebService_650000_GenerateSubdialog.vActCode" /> 
  				</if>
				<if cond="WebService_650000_GenerateSubdialog.vErrorCode != 'undefined'">
  					<assign name="AppState.vErrorCode" expr="WebService_650000_GenerateSubdialog.vErrorCode" /> 
  				</if>
				<goto next="#Branching15" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Branching15">
		<block>
			<if cond="AppState.vActCode == '000'">
				
				<!-- This is the OutLink -->
				<goto next="#Prompt19" />
			</if>
			<if cond="getBkndDwnValue(AppState.vActCode)=='DOWN'">
				
				<!-- This is the OutLink -->
				<goto next="#Branching17" />
			</if>
			<goto next="#Branching18" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt19">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt19P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'CCPinSuccess.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Branching16" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching16">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#Assign56" />
			</if>
			<goto next="#Assign57" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign56">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'APINSUCCESS'" />
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Apin generation success;'" />
			<assign name="AppState.vAuthFlag" expr="'Y'" />
			<assign name="AppState.vCCAuthAction" expr="'ATMPIN'" />				
			<goto next="#Branching13" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign57">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Apin generation success;'" />
			<assign name="AppState.vSubCallFlag" expr="'APINSUCCESS'" />
			<assign name="AppState.vAuthFlag" expr="'Y'" />
			<assign name="AppState.vCCAuthAction" expr="'ATMPIN'" />				
			<goto next="#Branching12" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching17">
		<block>
			<if cond="AppState.vBkndDownCounter&lt;2">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Prompt_BkndFail_Q_1" />
			</if>
			<goto next="#Copy_2_Assign_MenuID_BkndDown" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_2_Assign_MenuID_BkndDown">
		<block>
			
			<assign name="AppState.vTrav1" expr="AppState.vTrav1+'CCDown02;'" />				
			<goto next="#Prompt20" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt20">
        
        	        
        <script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
        <script srcexpr="AppState.VOXFILEDIR + '/' + AppState.vLang + '/' + AppState.vLang + '.js'" />
        <block>
	        <script>
	            AppState.PREV_APP_LANGUAGE = AppState.APP_LANGUAGE;
	            AppState.PREV_APP_ASR_LANGUAGE = AppState.APP_ASR_LANGUAGE;
	            AppState.APP_LANGUAGE = AppState.vLang;
	            AppState.APP_ASR_LANGUAGE = AppState.vLang;
	        </script>
        </block>
        
        
    	<block name="Prompt20P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'COR.SYSTEM.UNAVAILABLE.wav'"></audio>
    		</prompt>
		</block>
    	<block>
	        <script>resetLanguage()</script>
    		<goto next="#Assign58" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign58">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching18">
		<block>
			<if cond="(AppState.vCreditCardCRNInput).length == 15">
				
				<!-- This is the OutLink -->
				<goto next="#Assign59" />
			</if>
			<goto next="#Assign60" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign59">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Amex Prepaid Apin generation failure;'" />
			<assign name="AppState.vLastMenuId" expr="'WLNCC125'" />				
			<goto next="#Prompt20" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign60">
		<block>
			
			<assign name="AppState.vTrav2" expr="AppState.vTrav2+'Apin generation failure;'" />
			<assign name="AppState.vLastMenuId" expr="'WLNCC136'" />				
			<goto next="#Prompt20" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="AssignSemanticError">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'AT'" />
			<assign name="AppState.v_Reasons" expr="'RCC_SemanticError'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="AssignDisconnectError">
		<block>
			
			<assign name="AppState.vSubCallFlag" expr="'CUSTDISC'" />
			<assign name="AppState.vCallEndReason" expr="'0'" />
			<assign name="AppState.v_Reasons" expr="'RCC_CustDisc'" />				
			<goto next="#ECMAScript_AssigntoObject" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript4">
		<block>
			<script>
				AppState.ObjCall.vAccNum=AppState.ObjCall.vCreditCard;
			</script>	
			<goto next="#Log4" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript3">
		<block>
			<script>
				AppState.ObjCall.vCreditCard ='0'+AppState.ObjCall.vCreditCard;
			</script>	
			<goto next="#Subdialog_931500" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="Log4">
		<block>
			<log gvp:level="1">
				<value expr="'AppState.ObjCall.vAccNum'+AppState.ObjCall.vAccNum"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Subdialog_931500" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign61">
		<block>
			
			<assign name="AppState.vIVRAccess" expr="'YES'" />				
			<goto next="#IVRAccessCheck" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript5">
		<block>
			<script>
				AppState.ObjCall.vDOB=AppState.vDOB;
			</script>	
			<goto next="#Subdialog_650000_DOB" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign62">
		<block>
			
			<assign name="AppState.vPinActCode" expr="AppState.ObjCall.vActCode" />				
			<goto next="#Branching_ActCode" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript6">
		<block>
			<script>
				AppState.ObjCall.vCreditCard=AppState.vCreditCard;
			</script>	
			<goto next="#Log5" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="Log5">
		<block>
			<log gvp:level="1">
				<value expr="&quot;AppState.ObjCall.vCreditCard=&quot;+AppState.ObjCall.vCreditCard"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Sub_WebService" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript_Lang">
		<block>
			<script>
				AppState.vLang=AppState.ObjCall.vLang;
			</script>	
			<goto next="#SetLanguage_Entry" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript_AssigntoObject">
		<block>
			<script>
				try{
							AppState.LAST_EVENT_NAME=AppState.LAST_EVENT_NAME.replace(new RegExp('undefined','g'), '');
							__Log('####AppState.ObjCall.vCallEndReason :  '+AppState.ObjCall.vCallEndReason);
							__Log('####AppState.LAST_EVENT_NAME :  '+AppState.LAST_EVENT_NAME);
							__Log('####AppState.LAST_EVENT_URL :  '+AppState.LAST_EVENT_URL);
					if(AppState.LAST_EVENT_NAME==''){
							__Log('*****AppState.ObjCall.vCallEndReason is Carrying Previous Subdialogs EVENT :  '+AppState.ObjCall.vCallEndReason);
							__Log('*****AppState.ObjCall.vCallEndDetails  is Carrying Previous Subdialogs EVENT :  '+AppState.ObjCall.vCallEndDetails);
							AppState.ObjCall.vCallEndReason=getcallendreasonbyeventempty(AppState.ObjCall.vCallEndReason, AppState.ObjCall.vSubCallFlag);
							__Log('####AppState.vCallEndReason IN IF Cond Post JS function :  '+AppState.ObjCall.vCallEndReason);
					}else{
							AppState.ObjCall.vCallEndDetails=AppState.LAST_EVENT_ELEMENT+'#'+AppState.LAST_EVENT_LINE+'#'+AppState.LAST_EVENT_NAME+'#'+AppState.LAST_EVENT_URL;
							__Log('####AppState.LAST_EVENT_NAME before getcallendreason function is   :  '+AppState.LAST_EVENT_NAME);
							__Log('####AppState.ObjCall.vCallEndDetails are  :  '+AppState.ObjCall.vCallEndDetails);
							AppState.ObjCall.vCallEndReason=getcallendreason(AppState.LAST_EVENT_NAME);
							__Log('####AppState.vCallEndReason Post JS function :  '+AppState.ObjCall.vCallEndReason);
					}
							__Log('@@@@@FINAL Appstate.ObjCall.vCallEndReason INSIDE' +AppState.LAST_EVENT_URL+' is  :  '+AppState.ObjCall.vCallEndReason);
							__Log('@@@@@FINAL Appstate.ObjCall.vCallEndDetails INSIDE' +AppState.LAST_EVENT_URL+' is  :  '+AppState.ObjCall.vCallEndDetails);
					}	catch (error) {
							__Log('  ####  ERROR WHILE HANDLING ERROR EVENTS  ####  ');
					}
			</script>	
			<goto next="#ECMAScript_getCallDisconnect" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching_Customer_Disconnect">
		<block>
			<if cond="AppState.ObjCall.CallDisconnectFlag=='D'">
				
				<!-- This is the OutLink -->
				<goto next="#DB_Validation" />
			</if>
			<goto next="#Exit1" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="DB_Validation">
		<block>
			<log gvp:level="1">
				<value expr="'****ValueofTrav1 is**** ' + AppState.vTrav1"/>
			</log>
			<log gvp:level="1">
				<value expr="'AppState.ObjCall.vTxnStTime is : '+AppState.ObjCall.vTxnStTime"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Subdialog_InsertMasterData" />
    	</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Subdialog_InsertMasterData">

		<subdialog name="Subdialog_InsertMasterDataSubdialog" fetchhint="prefetch"  src="../src-gen/sub_InsertMasterData.vxml">
    		<param name="varActionParentId" expr="'sub_CC_Card_Activation'"/>
			<param name="ObjCall" expr="AppState.ObjCall" />
			<filled>
				<if cond="Subdialog_InsertMasterDataSubdialog.ObjCall != 'undefined'">
  					<assign name="AppState.ObjCall" expr="Subdialog_InsertMasterDataSubdialog.ObjCall" /> 
  				</if>
				<goto next="#Disconnect_error" />
			</filled>
		</subdialog>
		
    	<catch event="error.semantic">
    <goto next="#Disconnect_error" />
    	</catch>
    	<catch event="error.badfetch">
    <goto next="#Disconnect_error" />
    	</catch>
    	<catch event="error">
    <goto next="#Disconnect_error" />
    	</catch>
	</form>

	<!-- This is the Disconnect block -->
	<form id="Disconnect_error">
		<block>

			<disconnect />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMAScript_getCallDisconnect">
		<block>
			<script>
				try {
					
					__Log('******** Call Disconnect Method Call AppState.ObjCall.vCallEndReason : '+AppState.ObjCall.vCallEndReason+' AppState.ObjCall.vSubCallFlag : '+AppState.ObjCall.vSubCallFlag);
					AppState.ObjCall.CallDisconnectFlag=getCallDisconnect(AppState.ObjCall.vCallEndReason,AppState.ObjCall.vSubCallFlag);
					__Log('******* AppState.ObjCall.CallDisconnectFlag : '+AppState.ObjCall.CallDisconnectFlag);
					
					} catch (error) {
					__Log('********* Error while get Calldisconnect Flag');
					}
			</script>	
			<goto next="#Branching_Customer_Disconnect" />
		</block>
	</form>

	<!-- This is the WebService_APINEncryption block in Disabled mode -->
	<form id="WebService_APINEncryption">
    	<block>
    		<goto next="#WebService_650000_Generate" />
    	</block>
	</form>

	<!-- This is the Subdialog_CC_PinBlock block in Disabled mode -->
	<form id="Subdialog_CC_PinBlock">
    	<block>
    		<goto next="#WebService_651000" />
    	</block>
	</form>

</vxml>
